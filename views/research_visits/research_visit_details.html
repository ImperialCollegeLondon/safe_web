{{extend 'layout.html'}}


<style>
.panel-heading a:after {
    font-family:'Glyphicons Halflings';
    content:"\e114";
    float: right;
    color: grey;
}
.panel-heading a.collapsed:after {
    content:"\e080";
}
</style>


{{=session.flash or response.flash}}


{{=H2('Research visit planning')}}


{{=P('In order to work in the field, you will need to put together a research visit proposal. This will tell us who is in the field and allow you to book accomodation, transport between locations and research assistant support.')}}

{{=P('Most research visits are associated with an established project - note that only coordinators for a project can propose research visit. If you want to visit the SAFE project to look at the research system and plan a later formal project or grant, then you can also propose a "look see" visit.')}}


{{=OL(LI('Provide us with a title for the visit and a short description of the research purpose. You also need to give start and finish dates for the visit, covering the whole period when your researchers will be in the field. For research project visits, the dropdown menu will show all projects for which you are a coordinator.'),
      LI('Once the visit description has been submitted, you will then be able to book accomodation, transfers and research assistants' ))}}


{{=visit}}


{{=console}}


{{=history}}

{{=admin_panel}}

<!-- <div class="panel panel-default" id="panel1">
    <div class="panel-heading">
         <h3 class="panel-title">
           <a data-toggle="collapse" data-target="#maliau_table" href="#maliau_table" class="collapsed">
             Maliau Reservations
           </a>
         </h3>
    </div>
    <div id="maliau_table" class="panel-collapse collapse">
        Content
    </div>
</div> -->









{{=BR()}}

<!-- Scripts to select all for sets of checkboxes by name -->
<script>
$("#checkAll").change(function () {
    $("[name='records']").prop('checked', $(this).prop("checked"));
});
</script>


<!-- Script to act as a safety catch on removing visitors, since that
     can swallow the button name on the request, add a hidden field -->

<script>
function show_alert() {
  if(confirm("Removing users from a research visit will remove all accomodation and transfer bookings. Are you sure?"))
       $("#console").append('<input type="hidden" name="delete_visitor" value="True" />');
       $("#console").submit();
  else
    return false;
}
</script>


<!-- Script to trigger availability check when both dates are set.
     This allows the scripting to always check what is being booked
     and ensure that date restrictions are met -->

<script>
function date_change() {
    var a = $("#arr_date").val();
    var d = $("#dep_date").val();
    if (a != '' && d != '' ) {
       $("#console").append('<input type="hidden" name="datechange" value="True" />');
       $("#console").submit();
    }
}
</script>

