{{extend 'layout.html'}}


<style>
.panel-heading a:after {
    font-family:'Glyphicons Halflings';
    content:"\e114";
    float: right;
    color: grey;
}
.panel-heading a.collapsed:after {
    content:"\e080";
}
</style>


{{=session.flash or response.flash}}


{{=H2('Research visit planning')}}

{{= TAG.BUTTON('Estimate costs', 
                          _style='border:none;padding:0px 10px;font-size: 100%;',
           _type="submit")}}
{{=P('In order to work in the field, you will need to provide details about the work to be done and your field team. We will need health and safety information for all named researchers and you should make sure that your team update these details if needed.')}}


{{=H4('Research Visit Details', _style='background-color: lightgrey; line-height: 40px')}}

{{=visit}}




{{=console}}




<!-- <div class="panel panel-default" id="panel1">
    <div class="panel-heading">
         <h3 class="panel-title">
           <a data-toggle="collapse" data-target="#maliau_table" href="#maliau_table" class="collapsed">
             Maliau Reservations
           </a>
         </h3>
    </div>
    <div id="maliau_table" class="panel-collapse collapse">
        Content
    </div>
</div> -->









{{=BR()}}

<!-- Scripts to select all for sets of checkboxes by name -->
<script>
$("#checkAll").change(function () {
    $("[name='records']").prop('checked', $(this).prop("checked"));
});
</script>


<!-- Script to act as a safety catch on removing visitors, since that
     can swallow the button name on the request, add a hidden field -->

<script>
function show_alert() {
  if(confirm("Removing users from a research visit will remove all accomodation and transfer bookings. Are you sure?"))
       $("#console").append('<input type="hidden" name="delete_visitor" value="True" />');
       $("#console").submit();
  else
    return false;
}
</script>


<!-- Script to trigger availability check when both dates are set.
     This allows the scripting to always check what is being booked
     and ensure that date restrictions are met -->

<script>
function date_change() {
    var a = $("#arr_date").val();
    var d = $("#dep_date").val();
    if (a != '' && d != '' ) {
       $("#console").append('<input type="hidden" name="datechange" value="True" />');
       $("#console").submit();
    }
}
</script>

