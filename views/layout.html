<!DOCTYPE html>
<!--[if (gt IE 9)|!(IE)]><!--> <html class="no-js" lang="{{=T.accepted_language or 'en'}}"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <!-- www.phpied.com/conditional-comments-block-downloads/ -->
    <!-- Always force latest IE rendering engine
         (even in intranet) & Chrome Frame
         Remove this if you use the .htaccess -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge{{=not request.is_local and ',chrome=1' or ''}}">
    <!--  Mobile Viewport Fix
          j.mp/mobileviewport & davidbcalhoun.com/2010/viewport-metatag
          device-width: Occupy full width of the screen in its current orientation
          initial-scale = 1.0 retains dimensions instead of zooming out if page height > device height
          user-scalable = yes allows the user to zoom in -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{=response.title or request.application}}</title>
    <!-- http://dev.w3.org/html5/markup/meta.name.html -->
    <meta name="application-name" content="{{=request.application}}">
    <!-- Speaking of Google, don't forget to set your site up:
         http://google.com/webmasters -->
    <meta name="google-site-verification" content="">
    <!-- include stylesheets -->
    <link rel="stylesheet" href="{{=URL('static','css/bootstrap.min.css')}}"/>
    <link rel="stylesheet" href="{{=URL('static','css/web2py-bootstrap3.css')}}"/>
    <link rel="shortcut icon" href="{{=URL('static','images/favicon.ico')}}" type="image/x-icon">
    <link rel="apple-touch-icon" href="{{=URL('static','images/favicon.png')}}">
    <!-- All JavaScript at the bottom, except for Modernizr which enables
         HTML5 elements & feature detects -->
    <script src="{{=URL('static','js/modernizr-2.8.3.min.js')}}"></script>
    <!--[if lt IE 9]>
        <script src="{{=URL('static','js/respond-1.4.2.min.js')}}"></script>
        <![endif]-->
    <!-- Favicons -->
    {{include 'web2py_ajax.html'}} <!-- this includes jquery.js, calendar.js/.css and web2py.js -->
    <!-- {{block head}}{{end}} -->
    <!-- {{
    # using sidebars need to know what sidebar you want to use
    mc0 = 'col-md-12'
    mc1 = 'col-md-9'
    mc2 = 'col-md-6'
    left_sidebar_enabled = globals().get('left_sidebar_enabled', False)
    right_sidebar_enabled = globals().get('right_sidebar_enabled', False)
    middle_column = {0: mc0, 1: mc1, 2: mc2}[
    (left_sidebar_enabled and 1 or 0)+(right_sidebar_enabled and 1 or 0)]
    }} -->
<style type="text/css">

.banner_image {
    width: 100%;
    height: 150px;
    border: 1px solid green;
}

.banner_image img{
    object-fit: cover;
}

.logo_image {
    height: 50px;
    border: 2px solid black;
    position: absolute;
    right: 20px;
    top: 120px;
}
</style>

  </head>
  <body style='padding-top:0px;'>
    <!--[if lt IE 8]><p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p><![endif]-->

<!-- TODO
     - find out where the defined header lives and replace with the new one!
     - Work out to fit the image into the div rather than stretching it horribly.
-->

    <!-- Masthead ===================================== -->
    <!-- {{block header}}
    {{end}} -->
    <!-- Main ========================================= -->

	<!-- playing with rotating banners in a hacky way -->
	{{banners = ['images/banners/download.jpg',
			'images/banners/experiment.jpg',
			'images/banners/funders.jpg',
			'images/banners/home.jpg',
			'images/banners/outputs.jpg',
			'images/banners/personnel.jpg',
			'images/banners/science.jpg',
			'images/banners/working.jpg']}}
	{{import random}}
	{{this_banner= random.choice(banners)}}


	<!-- Similarly playing with header bar layout in a hacky  -->
    {{=H2('This is a beta version of the new website - any data entered is for testing purposes only and will be discarded before the site is relaunched. Not for live use!', _style='color:red;')}}
    <!-- <div class="container-fluid" > -->
    <!-- <div class="nav-header"> -->
    <div style="position: relative; left: 0; top: 0;">
	<!-- playing with rotating banners in a hacky way -->
	
        {{=IMG(_src=URL('static', this_banner), _height='130px',
                 _style="position: absolute; top: 0px; left: 0px; min-width:100%; flex-shrink:0;"),
        }}
        {{=A(IMG(_src=URL('static','images/SAFE_acronym_150.png'), _height='120px',
               _style="position: relative; top: 10px; left: 83%;"),
    	   _href=URL('default','index'))
       }}
    </div>
    <!-- </div> -->
    <!-- </div> -->
    
        <!-- Language handling code -->
    {{lang='en'}}
    {{en_URL = IMG(_src=URL('static','images/gb.svg'), _height='12px') + XML('&nbsp;')*2 + 'en'}}
    {{my_URL = IMG(_src=URL('static','images/my.svg'), _height='12px') + XML('&nbsp;')*2 + 'my'}}
    {{if lang == 'en': 
        active_lang_html = en_URL 
        inactive_lang_html = my_URL
      elif lang == 'my':
        inactive_lang_html = en_URL
        active_lang_html = my_URL
    }}
    {{pass}}
    
    <!-- Navbar ======================================= -->
    <nav class="navbar navbar-default" role="navigation"> <!-- TODO think about navbar setup and navbar-fixed-top -->
      <div class="container-fluid">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          {{=response.logo or ''}}
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
          <ul class="nav navbar-nav navbar-right">
	    {{=MENU([(active_lang_html, True, None, [
        	    	(inactive_lang_html, True, None, [])])],
		 _class='nav navbar-nav',li_class='dropdown',ul_class='dropdown-menu')}}
            {{='auth' in globals() and auth.navbar('Welcome',mode='dropdown') or ''}}
          </ul>
          {{if response.menu:}}
          {{=MENU(response.menu, _class='nav navbar-nav',li_class='dropdown',ul_class='dropdown-menu')}}
          {{pass}}
        </div>
      </div>
    </nav>
    <!-- Begin page content -->
    <div class="container-fluid main-container">
      <!-- {{if left_sidebar_enabled:}}
        <div class="col-md-3 left-sidebar">
            {{block left_sidebar}}
            <h3>Left Sidebar</h3>
            <p></p>
            {{end}}
        </div>
      {{pass}} -->

      <div class="{{=middle_column}}">
        {{block center}}
        {{include}}
        {{end}}
      </div>

      <!-- {{if right_sidebar_enabled:}}
        <div class="col-md-3">
            {{block right_sidebar}}
            <h3>Right Sidebar</h3>
            <p></p>
            {{end}}
        </div>
      {{pass}} -->

    </div>

    {{block footer}} <!-- this is default footer -->      
    <footer class="footer">
      <div class="container-fluid">
        <div class="copyright pull-left">{{=T('Copyright')}} &#169; {{=request.now.year}}</div>
	<!-- TODO ? add funder and supporter logos-->
	<!-- <img src="../static/images/supporters/logo-searrp-2015k_crop.png" height="35" alt="Logo Searrp 2015k">
	<img src="../static/images/supporters/royal_society_logo.gif" height="35" alt="Royal Society Logo">

	<img src="../static/images/supporters/imperial_college_logo.png" height="35" alt="Imperial College Logo"> -->
         <div id="poweredBy" class="pull-right">
            {{=T('Powered by')}}
            <a href="http://www.web2py.com/">web2py</a>
          </div>
      </div>
    </footer>
    {{end}}
    <!-- The javascript =============================== -->
    <script src="{{=URL('static','js/bootstrap.min.js')}}"></script>
    <script src="{{=URL('static','js/web2py-bootstrap3.js')}}"></script>
    {{block page_js}}{{end page_js}}
    {{if response.google_analytics_id:}}
    <!-- Analytics ==================================== -->
    <script src="{{=URL('static','js/analytics.min.js')}}"></script>
    <script type="text/javascript">
      analytics.initialize({
      'Google Analytics':{trackingId:'{{=response.google_analytics_id}}'}
      });
    </script>
    {{pass}}
    <!-- Share ============================y============ -->
    <script src="{{=URL('static','js/share.js',vars=dict(static=URL('static','images')))}}"></script>
  </body>
</html>
